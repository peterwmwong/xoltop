(function(){cell.define("Bar",{initialize:function(){return this.pages=["DASHBOARD","TESTS","STORIES"]},render:function(a){return"    <div id='xoltop'>XOLTOP</div>    "+a.each(this.pages,function(a,b){return"      <div class='navItemContainer'>        <a href='#' class='navItem "+(!b&&"selected"||"")+"'>"+a+"</a>      </div>    "})+"    <div id='searchContainer'>      <input id='searchinput' type='text'></input>      <div id='searchIcon'><div> </div></div>    </div>  "},"events el":{"click .navItem":function(a){this.$(".navItem.selected").removeClass("selected");return $(a.target).addClass("selected")}}})}).call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};cell.define("shared/Page/Nav",{initialize:function(){var a,b;return(b=(a=this.options).selectedTab)!=null?b:a.selectedTab=this.options.tabs[0]},render:function(b){return"    <ul>      "+b.each(this.options.tabs,a(function(a,b){return"        <li "+(this.options.selectedTab===a&&"class='selected'"||"")+">          <a href='#' id='"+a+"'>"+a+"</a><div class='triangle'></div>        </li>      "},this))+"    </ul>  "},"events el":{"click a":function(a){var b;this.$(".selected").removeClass("selected"),$(b=a.target).parent().addClass("selected");return $(this.el).trigger("changed",{selectedTab:this.options.selectedTab=b.id})}}})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};cell.define("shared/Page/Page",["require","./Nav"],function(b,c){var d;d=function(a){return setTimeout(a,0)};return{initialize:function(){var a,b,c,d;(c=(a=this.options).baseurl)!=null?c:a.baseurl="";return(d=(b=this.options).selectedSection)!=null?d:b.selectedSection=this.options.sections[0]},loadSection:function(c){var d;this.options.selectedSection=c.replace(" ","-"),d=this.$("> #content"),d.html("");return b([""+this.options.baseurl+"/"+c+"/"+c+"Section"],a(function(a){if(this.options.selectedSection===c){d.html("");return d.append((new a).el)}},this))},render:function(b){d(a(function(){return this.loadSection(this.options.selectedSection)},this));return""+b.cell(c,{id:"nav",tabs:this.options.sections,selectedTab:this.options.selectedSection})+"     <div id='content'></div>"},"events el":{"changed :parent > #nav":function(a,b){var c;c=b.selectedTab;return this.loadSection(c)}}}})}.call(this),function(){cell.define("App",["./Bar","shared/Page/Page"],function(a,b){return{render:function(c){return"    "+c.cell(a)+"    "+c.cell(b,{baseurl:"pages/Tests",selectedSection:"Metrics",sections:["Current","Failing","Metrics","All"]})+"  "}}})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};cell.define("shared/TableTree/NodeRow",function(){var b,c;b=function(a){return setTimeout(a,t)},c=function(a){var b,c,d,e,f;d=this.$("#children"),d.html("");for(e=0,f=a.length;e<f;e++)b=a[e],c=new this.Cell({"class":b.type,model:b,dataProviders:this.options.dataProviders}),d.append(c.el)};return{initialize:function(){var a;if(a=this.options.dataProviders[this.model.type])this.options.rowCell=a.rowCell,this.options.getChildren=a.getChildren;return this.options.rowClass="Row"+(" "+this.model.type||"")},render:function(d){var e;this.model.children instanceof Array&&b(a(function(){return c.call(this,this.model.children)},this)),this.options.getChildren&&((e=this.loadChildren)!=null?e:this.loadChildren=a(function(b){if(!this.model.children||b){this.model.children=this.options.getChildren.call(this.model,a(function(a){if(!this.model.children||b)return c.call(this,this.model.children=a)},this));if(this.model.children)return c.call(this,this.model.children)}},this),this.model.expanded&&!(this.model.children instanceof Array)&&setTimeout(this.loadChildren,0));return""+(this.options.rowCell?d.cell(this.options.rowCell,{"class":this.options.rowClass,model:this.model}):"<div class='"+this.options.rowClass+"'>"+this.model.id+"</div>")+"     <div id='children'></div>"},"events el":{"click :parent > .Row":function(){this.model.expanded||typeof this.loadChildren=="function"&&this.loadChildren(),this.$("> #children").toggle(this.model.expanded=!this.model.expanded);return!1}}}})}.call(this),function(){cell.define("shared/TableTree/TableTree",["./NodeRow"],function(a){return{render:function(b){return"    <div id='titlebar'>"+this.options.title+"</div>    <div id='rows'>      <div id='headerrow'>        "+b.each(this.options.cols,function(a){return"<span class='headercol'>"+a+"</span>"})+"      </div>      "+b.cell(a,{"class":"ROOT",model:{type:"_",expanded:!0},dataProviders:this.options.dataProviders})+"    </div>  "}}})}.call(this),function(){define("DataService",["require","exports","module"],function(){var a,b;b=function(){var a;a=0;return function(b){var c,d;c="__jsonp"+ ++a,window[c]=function(a){b.success(a),delete window[c];return $("#"+c).remove()},d=document.createElement("script"),d.id=c,d.setAttribute("type","text/javascript"),d.setAttribute("src",""+b.url+"?callback="+c);return $("head").append(d)}}(),a=function(a,c){b({url:"http://localhost:6969/xptool/rest/testmetrics/"+a,success:function(a){return c(a.map(function(a){return a.metrics}))}});return};return{getReleases:function(b){return a("releases",b)},getReleaseIterations:function(b,c){return a("releases/"+b+"/iterations",c)},getReleaseChumps:function(b,c){return a("releases/"+b+"/chumps",c)},getReleaseIterationStories:function(b,c){return a("iterations/"+b.iteration+"/stories",c)},getReleaseChumpStories:function(b,c){return a("releases/"+b.release+"/chumps/"+b.chump+"/stories",c)}}})}.call(this),function(){cell.define("pages/Tests/Metrics/CountBar",{render:function(){return"    <span id='count'>"+this.model.count+"</span>    <span id='barContainer'>      <div id='bar' style='width:"+Math.min(100,this.model.pct*100)+"%'>&nbsp;</div>    </span>  "}})}.call(this),function(){cell.define("pages/Tests/Metrics/RowCell",["./CountBar"],function(a){return{render:function(b){var c,d,e,f,g,h,i,j,k,l;e=(h=this.model.data)!=null?h.parent:void 0;return"    <span class='nameContainer'>"+(this.nameLabel||"")+"<span class='name'>"+(this.model.data.name||"")+"</span></span>    "+(this.noCounts&&""||"        <span class='counts'>          <span class='ats'>"+b.cell(a,{model:{count:c=((i=this.model.data)!=null?i.ats:void 0)||0,pct:typeof (f=(e!=null?e.ats:void 0)||(e!=null?(j=e.parent)!=null?j.ats:void 0:void 0))==="number"&&c/f||.5}})+"</span>          <span class='chumpTasks'>"+b.cell(a,{model:{count:d=((k=this.model.data)!=null?k.chumpTasks:void 0)||0,pct:typeof (g=(e!=null?e.chumpTasks:void 0)||(e!=null?(l=e.parent)!=null?l.chumpTasks:void 0:void 0))==="number"&&d/g||1}})+"</span>      ")+"    </span>    "}}})}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};cell.define("pages/Tests/Metrics/MetricsSection",["shared/TableTree/TableTree","DataService","./RowCell"],function(b,c,d){var e,f;f=function(a,b){var c;for(c in b)a[c]=b[c];return a},e={_:{data:{id:"ReleasesID"},getChildren:function(a){return c.getReleases(function(b){return a(b.map(function(a){return{type:"release",id:a.id,data:a}}))})}},release:{rowCell:d.extend({nameLabel:"Release"}),getChildren:function(b){var c,d,e,f,g;f=["chumpsForRelease","iterationsForRelease"],g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push(a(function(){return{type:c,id:this.id,data:{parent:this.data}}},this)());return g}},iterationsForRelease:{rowCell:d.extend({nameLabel:"Iterations",noCounts:!0}),getChildren:function(b){return c.getReleaseIterations(this.id,a(function(c){return b(c.map(a(function(a){return{type:"iteration",id:a.id,data:f(a,{release:this.id,parent:this.data})}},this)))},this))}},chumpsForRelease:{rowCell:d.extend({nameLabel:"Chumps",noCounts:!0}),getChildren:function(b){return c.getReleaseChumps(this.id,a(function(c){return b(c.map(a(function(a){return{type:"chump",id:a.id,data:f(a,{release:this.id,parent:this.data})}},this)))},this))}},iteration:{rowCell:d,getChildren:function(b){return c.getReleaseIterationStories({release:this.release,iteration:this.id},a(function(c){return b(c.map(a(function(a){return{type:"story",id:a.id.toString(),data:f(a,{parent:this.data})}},this)))},this))}},chump:{rowCell:d,getChildren:function(b){return c.getReleaseChumpStories({release:this.release,iteration:this.id},a(function(c){return b(c.map(a(function(a){return{type:"story",id:a.id.toString(),data:f(a,{parent:this.data})}},this)))},this))}},story:{rowCell:d}};return{render:function(a){return"    "+a.cell(b,{id:"Metrics",title:"Test Metrics",cols:["ATs","Chump Tasks"],dataProviders:e})+"  "}}})}.call(this),function(){require(["App","pages/Tests/Metrics/MetricsSection"])}.call(this),define("_bootstrap",function(){})